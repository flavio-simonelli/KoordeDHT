syntax = "proto3";

package client.v1;

option go_package = "github.com/flaviosimonelli/KoordeDHT/internal/api/client/v1;clientv1";

import "google/protobuf/empty.proto";

// ---------------------------------------------------------------
// Key-Value API per i client
// ---------------------------------------------------------------
message PutRequest {
  bytes key = 1;
  string value = 2;
}

message GetRequest {
  bytes key = 1;
}

message GetResponse {
  string value = 1;
}

message DeleteRequest {
  bytes key = 1;
}

// ---------------------------------------------------------------
// API Client-facing
// ---------------------------------------------------------------

service ClientAPI {
  // KV storage
  rpc Put(PutRequest) returns (google.protobuf.Empty);
  rpc Get(GetRequest) returns (GetResponse); // status.Error(codes.NotFound, "key not found") se la chiave non esiste
  rpc Delete(DeleteRequest) returns (google.protobuf.Empty); // status.Error(codes.NotFound, "key not found") se la chiave non esiste
}
