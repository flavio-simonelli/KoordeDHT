./init.sh --sim-duration 5m --query-rate 0.8 --parallel-min 1 --parallel-max 10 --delay 200ms --jitter 50ms --loss 0.1% --churn-interval 10s --churn-min-active 5 --churn-pjoin 0.2 --churn-pleave 0.8 --max-nodes 30


[INFO] Removing previous output...
[INFO] Generating docker-compose file...
tee: /var/log/test/gen_compose.log: No such file or directory

Generating docker-compose.generated.yml ...

Generated docker-compose.generated.yml successfully.
  SIM_DURATION=5m
  QUERY_RATE=0.8
  QUERY_PARALLELISM_MIN=1
  QUERY_PARALLELISM_MAX=10
  QUERY_TIMEOUT=10s

Logs saved to: /var/log/test/gen_compose.log
[OK] Generated docker-compose.generated.yml.
[INFO] Starting Docker Compose...
 Container jaeger  Creating
 Container jaeger  Created
 Container test-bootstrap-1  Creating
 Container test-bootstrap-1  Created
 Container test-tester-1  Creating
 Container test-node-4  Creating
 Container test-node-2  Creating
 Container test-node-30  Creating
 Container test-node-3  Creating
 Container test-node-1  Creating
 Container test-node-23  Creating
 Container test-node-5  Creating
 Container test-node-24  Creating
 Container test-node-11  Creating
 Container test-node-18  Creating
 Container test-node-12  Creating
 Container test-node-28  Creating
 Container test-node-19  Creating
 Container test-node-29  Creating
 Container test-node-6  Creating
 Container test-node-25  Creating
 Container test-node-20  Creating
 Container test-node-13  Creating
 Container test-node-26  Creating
 Container test-node-21  Creating
 Container test-node-9  Creating
 Container test-node-27  Creating
 Container test-node-10  Creating
 Container test-node-22  Creating
 Container test-node-14  Creating
 Container test-node-7  Creating
 Container test-node-17  Creating
 Container test-node-15  Creating
 Container test-node-8  Creating
 Container test-node-16  Creating
 Container test-node-30  Created
 Container test-node-2  Created
 Container test-tester-1  Created
 Container test-node-5  Created
 Container test-node-6  Created
 Container test-node-18  Created
 Container test-node-21  Created
 Container test-node-23  Created
 Container test-node-29  Created
 Container test-node-14  Created
 Container test-node-15  Created
 Container test-node-19  Created
 Container test-node-27  Created
 Container test-node-9  Created
 Container test-node-11  Created
 Container test-node-7  Created
 Container test-node-25  Created
 Container test-node-16  Created
 Container test-node-13  Created
 Container test-node-4  Created
 Container test-node-24  Created
 Container test-node-1  Created
 Container test-node-3  Created
 Container test-node-20  Created
 Container test-node-10  Created
 Container test-node-8  Created
 Container test-node-17  Created
 Container test-node-28  Created
 Container test-node-26  Created
 Container test-node-12  Created
 Container test-node-22  Created
 Container jaeger  Starting
 Container jaeger  Started
 Container test-bootstrap-1  Starting
 Container test-bootstrap-1  Started
 Container test-tester-1  Starting
 Container test-node-27  Starting
 Container test-node-27  Started
 Container test-node-20  Starting
 Container test-tester-1  Started
 Container test-node-20  Started
 Container test-node-25  Starting
 Container test-node-25  Started
 Container test-node-26  Starting
 Container test-node-26  Started
 Container test-node-24  Starting
 Container test-node-24  Started
 Container test-node-11  Starting
 Container test-node-11  Started
 Container test-node-13  Starting
 Container test-node-13  Started
 Container test-node-12  Starting
 Container test-node-12  Started
 Container test-node-15  Starting
 Container test-node-15  Started
 Container test-node-16  Starting
 Container test-node-16  Started
 Container test-node-8  Starting
 Container test-node-8  Started
 Container test-node-3  Starting
 Container test-node-3  Started
 Container test-node-9  Starting
 Container test-node-9  Started
 Container test-node-17  Starting
 Container test-node-17  Started
 Container test-node-7  Starting
 Container test-node-7  Started
 Container test-node-5  Starting
 Container test-node-5  Started
 Container test-node-19  Starting
 Container test-node-19  Started
 Container test-node-28  Starting
 Container test-node-28  Started
 Container test-node-10  Starting
 Container test-node-10  Started
 Container test-node-14  Starting
 Container test-node-14  Started
 Container test-node-21  Starting
 Container test-node-21  Started
 Container test-node-29  Starting
 Container test-node-29  Started
 Container test-node-18  Starting
 Container test-node-18  Started
 Container test-node-22  Starting
 Container test-node-22  Started
 Container test-node-6  Starting
 Container test-node-6  Started
 Container test-node-1  Starting
 Container test-node-1  Started
 Container test-node-23  Starting
 Container test-node-23  Started
 Container test-node-4  Starting
 Container test-node-4  Started
 Container test-node-30  Starting
 Container test-node-30  Started
 Container test-node-2  Starting
 Container test-node-2  Started
[OK] Docker Compose started.
[INFO] Applying network delay...
tee: /var/log/test/network-delay.log: No such file or directory
[INFO] Waiting for Docker network 'test_koordenet' (timeout: 60s)...
[OK] Docker network 'test_koordenet' detected.
[INFO] Applying delay=200ms Â±50ms, loss=0.1% on interface br-4c66b9c83f39
[OK] Network emulation applied on Docker network 'test_koordenet' (br-4c66b9c83f39)
[OK] Network delay applied on the network test_koordenet
[INFO] Starting Pumba network delay daemon...
e1e07424dddf60dc022d431928dfdc0e40ac1459d1bdd0db1b207dfbf60dd863
[OK] Pumba delay running for 5m (delay=200ms, jitter=50ms, loss=0.1%).
[INFO] Starting churn controller...
[OK] Churn controller started with PID 242067.
[INFO] Simulation running for 5m...
tee: /var/log/test/churn.log: No such file or directory
------------------------------------------------------------
[INFO] Starting churn controller
       Prefix:      test-node
       Interval:    10ss
       Min active:  5
       P(join):     0.2
       P(leave):    0.8
       Log file:    /var/log/test/churn.log
------------------------------------------------------------
[LEAVE] Stopping test-node-20...
[LEAVE] Stopping test-node-29...
[LEAVE] Stopping test-node-14...
[LEAVE] Stopping test-node-7...
[LEAVE] Stopping test-node-12...
[LEAVE] Stopping test-node-21...
[LEAVE] Stopping test-node-15...
[LEAVE] Stopping test-node-26...
[LEAVE] Stopping test-node-27...
[JOIN] Starting test-node-7...
[JOIN] Starting test-node-20...
[LEAVE] Stopping test-node-25...
[LEAVE] Stopping test-node-2...
[LEAVE] Stopping test-node-3...
[JOIN] Starting test-node-14...
[LEAVE] Stopping test-node-13...
[LEAVE] Stopping test-node-28...
[LEAVE] Stopping test-node-9...
[LEAVE] Stopping test-node-23...
[LEAVE] Stopping test-node-19...
[LEAVE] Stopping test-node-1...
[LEAVE] Stopping test-node-4...
[JOIN] Starting test-node-1...
[LEAVE] Stopping test-node-24...
[JOIN] Starting test-node-27...
[LEAVE] Stopping test-node-22...
[INFO] Simulation duration elapsed.
[INFO] Stopping churn controller...

[INFO] Stopping churn controller gracefully...
[OK] Churn controller stopped.
[INFO] Removing network delay...
tee: /var/log/test/network-delay.log: No such file or directory
[INFO] Waiting for Docker network 'test_koordenet' (timeout: 60s)...
[OK] Docker network 'test_koordenet' detected.
[INFO] Clearing network emulation rules from br-4c66b9c83f39...
[sudo] password for flaviosimonelli:
[OK] Network restored to normal conditions
[OK] Network delay removed.
[INFO] Stopping and removing all containers...
[OK] All containers stopped and removed.
[SUCCESS] Simulation completed successfully.
